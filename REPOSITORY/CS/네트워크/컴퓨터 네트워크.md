#개념 #네트워크 #통신 
### 컴퓨터 네트워크의 기본 용어
- 네트워크: 네트워크는 통신 및 데이터 교환을 가능하게 하기 위해 함께 연결되는 컴퓨터 및 장치의 모음
- 노드: 노드는 네트워크에 연결된 장치, 여기에는 컴퓨터, 서버, 프린터, 라우터, 스위치 및 기타 장치가 포함될 수 있음
- 프로토콜: 프로토콜은 네트워크를 통해 데이터가 전송되는 ㅂ장식을 제어하는 일련의 규칙 및 표준. 프로토콜의 예로는 TCP/IP, HTTP 및 FTP가 있음
- 토폴로지: 네트워크 토폴로지는 네트워크에 있는 노드의 물리적, 논리적 배열을 나타냄. 일반적인 네트워크 토폴로지에는 버스, 스타, 링, 메시 및 트리가 포함됨
- 서비스 제공업체 네트워크: 네트워크 제공업체로부터 네트워크 용량 및 기능을 임대할 수 있는 권한을 부여. 서비스 제공업체 네트워크에는 무선통신, 데이터 매체 등이 포함됨
- IP주소: IP 주소는 네트워크의 모든 장치에 할당되는 고유한 숫자 식별자. IP주소는 장치를 식별하고 장치 간 통신을 활성화 하는데 사용됨
- DNS: DNS(Domain Name System)은 사람이 읽을 수 있는 이름을 컴퓨터가 이해하는 IP주소로 변환하는데 사용되는 프로토콜
- 방화벽: 방화벽은 들어오고 나가는 네트워크 트래픽을 모니터링하고 제어하는데 사용되는 보안장치. 무단 액세스 및 기타 보안 위협으로부터 네트워크를 보호하는데 사용
### 기업 컴퓨터 네트워크의 유형
- LAN: 근거리 통신망(LAN)은 사무실이나 집과 같은 소규모 지역을 포괄하는 네트워크. LAN은 일반적으로 건물이나 캠퍼스 내의 컴퓨터와 기타 장치를 연결하는데 사용됨
- WAN: WAN(Wide Area Network)은 도시, 국가 또는 전 세계와 같은 넓은 지리적 영역을 포괄하는 네트워크. WAN은 LAN을 서로 연결하는데 사용되며 일반적으로 장거리 통신에 사용됨
- 클라우드 네트워크: 클라우드 네트워크는 공용 또는 사설 클라우드 서비스 제공업체에서 호스팅할 수 있고 수요가 있는 경우 클라우드 네트워크를 사용할 수 있으므로 WAN(광역 네트워크)으로 시각화할 수 있음. 클라우드 네트워크는 가상 라우터, 방화벽 등으로 구성됨

### 컴퓨터 네트워크 아키텍처의 유형

- 클라이언트 - 서버 아키텍처: 노드가 서버 또는 클라이언트가 될 수 있는 컴퓨터 네트워크 아키텍처의 한 유형. 여기서 서버 노드는 클라이언트 노드 동작을 관리할 수 있음
- P2P 아키텍처: 중앙서버라는 개념이 없고 각 장치는 클라이언트 또는 서버로 작동하는데 무료임

### 네트워크 장치
데이터나 미디어를 송수신 하기 위하여 여러 경로를 사용하여 연결된 호스트라고도 하는 여러 장치의 상호연결. 컴퓨터 네트워크에는 서로 다른 두 장치간의 통신을 돕는 여러 장치/매체가 포함될 수 도 있음. 이를 네트워크 장치라고 하며 라우터, 스위치, 허브, 브리지 등이 포함됨

### IP주소
논리주소라고도 하는  IP 주소는 네트워크를 통한 시스템의 네트워크 주소. 월드 와이드 웹에서 각 장치를 식별하기 위해 IANA(Internet Assigned Numbers Authority)는 IPV4(버전 4)주소를 인터넷의 각 장치에 고유 식별자로 할당함. IPv4 주소의 길이는 32비트이므로 2의 32제곱만큼의 IP주소를 사용할 수 있음.

### MAC 주소(미디어 엑세스 주소)
물리적 주소 라고도 하는 MAC 주소는 각 호스트의 고유 식별자이며 해당 NIC(네트워크 인터페이스 카드)와 연결됨. NIC는 제조시 MAC 주소가 할당됨. 

### 포트(port)
포트는 애플리케이션과 데이터를 주고받을 수 있는 논리적 채널. 모든 호스트에는 여러개의 애플리케이션이 실행될 수 있으며 이러한 각 애플리케이션은 실행중인 포트 번호를 사용하며 식별됨

### OSI 7계층
#### 1. 물리계층
- 비트 동기화
- 비트 전송률 제어
- 물리적 토폴로지
- 전송 모드
#### 2. 데이터 링크 계층
> 메세지의 노드 간 전달 담당

- 논리 링크 제어(LLC)
- 미디어 엑세스 제어(MAC)

- 프레이밍
- 물리적 주소 지정
- 오류 제어
- 흐름 제어
- 엑세스 제어

#### 3. 네트워크 계층
> 네트워크 계층은 한 호스트에서 다른 네트워크에 있는 다른 호스트로 데이터를 전송하는데 사용됨. 패킷 라우팅, 즉 사용 가능한 경로 . 수중에서 패킷을 전송할 최단 경로를 선택하는 작업도 처리함. 발신자와 수신자의 IP주소는 네트워크 계층에 의해 헤더에 배치됨

- 라우팅
- 논리적 주소 지정

#### 4. 전송계층
> 애플리케이션 계층에 서비스 제공, 네트워크 계층에서 서비스를 가져옴

- 분할 및 재조립
- 서비스 지점 주소 지정: 메시지가 올바른 곳에 전달되도록 하기 위함

#### 5. 세션 계층

#### 6. 표현 계층
- 번역
- 암호화/ 복호화
- 압축
#### 7. 응용 계층


### TCP/IP 모델

- OSI 모델은 참조/논리 모델이므로, 통신 절차를 더 작고 간단한 구성 요소로 나누어 통신 시스템의 기능을 설명하도록 설계되었음
- TCP/IP는 1960년대 국방부(DoD)에서 설계 및 개발되었고 표준 프로토콜을 기반으로 함
- 층의 수는 때때로 5개 도는 4개로 지칭됨. 4계층 참조에서는 `물리계층과 데이터링크 계층`을 `물리계층` 또는 `네트워크 인터페이스 계층`으로 하나의 단일 계층으로 지칭함

> 무엇을 하나?

TCP/IP 의 주요 작업은 컴퓨터의 데이터를 한 장치에서 다른 장치로 전송하는 것. 이 프로세스의 주요 조건은 수신자가 발신자가 보낸 것과 동일한 정보를 수신할 수 있도록 데이터를 신뢰할 수 있고 정확하게 만드는 것. 각 메시지가 최종 목적지에 정확하게 도달 되도록 하기 위하여 TCP/IP 모델은 데이터를 패킷으로 나누고 다른 쪽 끝에서 결합하므로 한쪽 끝에서 다른 쪽 끝으로 전송하는 동안 데이터의 정확성을 유지하는데 도움이 됨

> TCP 와 IP의 차이점?

TCP와 IP는 컴퓨터 네트워크의 서로 다른 프로토콜임. TCP(전송 제어 프로토콜)와 IP(인터넷 프로토콜)의 기본적인 차이점은 데이터 전송에 있음. 쉽게 말하면 IP는 메일의 목적지를 찾아주고, TCP는 메일을 보내고 받는 일을 함. UDP는 다른 컴퓨터와 통신하는 데 IP가 필요하지 않은 또 다른 프로토콜. IP는 TCP에만 필요함

> TCP/IP 모델은 어떻게 작동하는가?

TCP/IP 모델을 사용하여 인터넷을 통해 무엇인가를 보내려고 할 때마다 TCP/IP 모델은 송신자 측에서 데이터를 패킷으로 나누고 수신자 측에서는 동일한 패킷을 다시 결합하여 동일한 데이터를 구성하여야 함. 데이터의 정확성을 유지하기 위하여 발생하는 일. TCP/IP 모델은 데이터를 4계층 절차로 나눔. 여기서 데이터를 먼저 한 순서로 이 계층에 들어가고 다시 역순으로 수신자 측에서 동일한 방식으로 구성됨

> TCP 모델의 계층
1. 물리계층
	- 네트워크 통신이 필요한 애플리케이션 그룹. 이 계층은 데이터를 생성하고 연결을 요청하는 역할을 담당. 발신자를 대신하여 작동하고 네트워크 액세스 계층은 수신자를 대신하여 작동함
2. 데이터 링크 계층(MAC)
	- 패킷의 네트워크 프로토콜 유형(TCP/IP)은 데이터 링크 계층에 의해 식별됨. 오류 방지 및 프레이밍도 데이터링크 계층에서 제공.
3. 인터넷(네트워크) 계층(IP)
	- OSI 네트워크 계층의 기능과 유사. 전체 네트워크를 통한 데이터의 논리적 전송을 담당하는 프로토콜을 정의함. 이 계층에 있는 주요 프로토콜은 다음과 같음
		- IP
		- ICMP
		- ARP
4. 전송계층(TCP/UDP)
	- 데이터 수신 확인을 교환하고 누락된 패킷을 재전송하여 패킷이 오류 없이 순서대로 도착하는지 확인함. End - to End 통신을 지칭. TCP(전송 제어 프로토콜) 및 사용자 데이터그램 프로토콜은 이 수준(UDP)의 전송계층 프로토콜
		- TCP: 애플리케이션은 마치 회선으로 물리적으로 연결된 것처럼 TCP를 사용하여 서로 상호 작용할 수 잇음. TCP는 별도의 패킷이 아닌 문자별 전송과 유사한 방식으로 데이터를 전송함. 연결을 설정하는 시작점, 바이트 순서의 전체 전송 및 연결을 닫는 종료점이 이 전송을 구성함
		- UDP: 데이터그램 전달 서비스는 다른 전송 계층 프로토콜인 UDP에 의해 제공됨. 수신 호스트와 송신 호스트 간 연결은 UDP로 확인되지 않음. 적은 양의 데이터를 전송하는 애플리케이션은 TCP 대신 UDP를 사용함. UDP 를 사용하면 연결 설정 및 유효성 검사 프로세스가 필요하지 않기 때문
5. 애플리케이션 계층
	- OSI 모델의 전송 계층과 유사. End - To - End 통신과 오류없는 데이터 전달을 담당. 데이터의 복잡성으로부터 상위 계층 애플리케이션을 보호. 이 계층에 존재하는 세가지 주요 프로토콜은 다음과 같음
		- HTTP와 HTTPS

![[Pasted image 20240409235357.png]]

| TCP/IP                                        | OSI                                |
| --------------------------------------------- | ---------------------------------- |
| TCP는 전송 제어 프로토콜                               | OSI는 개방형 시스템 상호 연결                 |
| 애플리케이션 계층 자체에서 세션과 표현 계층 모두를 사용               | 각각 사용                              |
| 연결없는 수평적 접근 방식을 따름                            | 수직적 접근 방식을 따름                      |
| 전송계층은 패킷 전달을 보장하지 않음                          | 전송계층은 패킷 전달을 보장함                   |
| 프로토콜을 쉽게 교체할 수 없음                             | 기술변화로 인하여 쉽게 프로토콜 교체도 가능함          |
| 네트워크 계층은 비연결(IP) 서비스만 제공함. 전송 계층(TCP)은 연결을 제공 | 비연결 및 연결 지향 서비스는 OSI 네트워크 계층에서 제공됨 |
### HTTP

- HTTP/HTTPS 와 WebSocket 모두 서버 - 클라이언트 통신에 사용되는 통신 프로토콜
- HTTP는 매번 서버에 대한 새 연결을 설정하고 응답을 받은 후 연결이 자동으로 종료됨(Stateless). HTTP는 연결지향 프로토콜인 TCP 위에서 실행되는 상태 비저장 프로토콜로 3 way 핸드쉐이킹 방법을 사용하여 데이터 패킷 전송 전달을 보장하고 손실된 패킷을 다시 저장함


### TCP와 UDP

##### Transport Layer
`신뢰성` 있는 데이터 `전송`을 담당하는 계층
- `신뢰성`: 데이터를 순차적, 안정적 전달
- `전송`: 포트번호에 해당하는 프로세스에 데이터를 전달

![[Pasted image 20240410020834.png]]
1.  데이터가 제대로 도착했는지 확인해주고
2. 전송된 데이터의 목적지가 어떤 애플리케이션인지 식별해줌
3. 흐름제어도 혼잡제어도..
4. 아무튼 전송계층이 없으면 데이터가 손실될 수 도 있다는것만 알아두면 됨

##### 전송계층의 연결형 통신과 비연결형 통신 

전송계층의 특징은 `신뢰성`과 `효율성`으로 구분할 수 있음
- 신뢰성: 데이터를 목적지에 문제없이 전달 -> 연결형 통신 
- 효율성: 데이터를 빠르고 효율적으로 전달 -> 비연결형 통신

![[Pasted image 20240410015753.png]]

#### TCP
- 1970년 냉전 당시 미 국방성이 개발하던 알파넷 프로젝트의 일부로...`핵전쟁이 나도 살아남는 네트워크`고안하면서 만들게됨..바로 `패킷교환방식`! 
- 신뢰성있는 데이터 통신을 가능하게 해주는 프로토콜
- Connection 연결(3 Way-handshake) - 양방향 통신
- 데이터의 순차 전송을 보장
- Flow Control
- Congestion Control
- Error Detection 
##### TCP Header
![[Pasted image 20240410022136.png]]
TCP는 전송의 신뢰성과 흐름 제어, 혼잡 제어 등의 역할을 맡고 있는 프로토콜이기 때문에, TCP 헤더에도 이러한 기능을 사용하기 위한 여러가지 값들이 담겨있음
- Source port, Destination port : 세그먼트의 출발지와 목적지를 나타내는 필드
- Sequence Number : 최대 `4,294,967,296` 까지의 수를 담을 수 있음. 이 시퀀스 번호 덕분에, 수신자는 쪼개진 세그먼트의 순서를 파악하여 올바른 순서로 데이터를 재조립
- Flags: 아래 FIN, ACK, SYN 등 전송을 제어할 때 사용하는 플래그 비트
- 등등등.. 많지만 생략할게요.
##### TCP의 데이터 전송 방식
![[Pasted image 20240410014654.png]]
1. client 가 패킷 송신
2. Server에서 ACK 송신
3. ACK를 수신하지 못하면 재전송
##### 3-Way handshake(connection 연결)
![[Pasted image 20240410014139.png]]
1. SYN 비트를 1로 설정해 패킷 송신
2. SYN, ACK비트를 1로 설정하여 패킷 송신
3. ACK 비트를 1로 설정하여 패킷 송신
##### 4-Way handshake(connection 닫기)
![[Pasted image 20240410014904.png]]
1. 데이터를 전부 송신한 Client가 FIN 송신
2. Server가 ACK 송신
3. Server에서 남은 패킷 송신(일정 시간 대기)
4. Server가 FIN 송신
5. Client가 ACK 송신
##### TCP의 문제점
- 전송의 신뢰성은 보장하지만..
- 매번 Connection 연결해야해서 시간 손실이 발생함(3 Way-handshake)
- 패킷을 조금만 손실해도 재전송 -> 어떻게 보면 되게 효율성이 떨어질 수 있는,, 그래서 UDP
#### UDP(User Datagram Progocol)
- TCP 보다 신뢰성이 떨어지지만 전송 속도가 일반적으로 빠른 프로토콜(순차 전송x, 흐름제어x, 혼잡 제어x)
- Connectionless (3 Way-handshake x)
- Error Detection
- 비교적 데이터의 신뢰성이 중요하지 않을 때 사용함(ex. 영상 스트리밍)

##### UDP Header
![[Pasted image 20240410022659.png]]
- Source port, Destination port : 세그먼트의 출발지와 목적지를 나타내는 필드
- Checksum: 에러검출

#### UDP의 데이터 전송 방식

![[Pasted image 20240410014813.png]]
1. client가 패킷 송신.. 끝임
#### 차이점 정리
![[Pasted image 20240410024344.png]]

| 구분  | TCP                                                | UDP                                     |
| --- | -------------------------------------------------- | --------------------------------------- |
| 신뢰성 | 신뢰성 위해 ACK, Checksum 등 사용                          | 신뢰성 없음                                  |
| 연결성 | 연결 지향성(Connection 맺고 통신)                           | 비연결성                                    |
| 재전송 | 재전송 요청함(오류 및 패킷 손실 검출시)                            | 재전송 없음                                  |
| 특징  | Flow control 위해 Windowing 사용<br>속도는 다소 느려도 신뢰성을 제공 | 신뢰성 보장하지 않지만.. <br>고속데이터 전송, 실시간 전송에 적합 |
| 용도  | 신뢰성이 필요한 통신                                        | 총 패킷수가 적은 통신<br>동영상 및 음성 등 멀티미디어 통신     |


### 소켓 통신

- WebSocket은 서버 - 클라이언트 통신과 동일한 시나리오에서 사용되는 양방향 전이중 프로토콜임
- HTTP와 달리 ws:// wes://에서 시작됨
- 클라이언트와 서버간 연결이 한쪽에 의해 종료될 때까지 유지된다는 것을 의미하는 상태 저장 프로토콜(Stateful)
-  통신 링크 설정 및 연결이 열리면 클라이언트 - 서버 간 연결이 지속될 때까지 양방향 모드로 메시지 교환이 이루어짐

![[Pasted image 20240410002702.png]]

##### 활용 예

- 실시간 웹 어플리케이션 : 웹소켓을 사용하여 백엔드 서버에서 지속적으로 전송되는 데이터를 클라이언트 측에 표시함. WebSocket 에서는 이미 열려있는 동일한 연결로 데이터가 지속적으로 푸시/전송 되므로 WebSocket이 더 빠르고 어플리케이션 성능이 향상됨
- 게임 어플리케이션: 데이터가 서버에서 지속적으로 수신되고 UI를 새로 고치지 않고도 화면에 적용됨
- 채팅 어플리케이션: WebSocket을 사용하여 구독자 간 메시지 교환, 게시 및 브로드캐스팅을 위해 한번만 연결을 설정함. 메시지 전송 및 수신과 일대일 메시지 전송을 위해 WebSocket 연결을 재사용함

##### 활용하지 않는 경우

네트워크를 통해 전송되는 실시간 업데이트 또는 지속적인 데터 스트림을 원하는 경우 Web Socket 을 사용하지만, 오래된 데이터를 가져오거나 애플리케이션으로 처리하기 위해 한번만 데이터를 가져오려면HTTP/HTTPS 프로토콜을 사용함. 자주 필요하지 않거나 한번만 가져오는 오래된 데이터는 간단요청은 WebSocket 을 지양하는것이 좋음